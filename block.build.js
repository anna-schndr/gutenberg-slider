this.pluginnamespace=this.pluginnamespace||{},this.pluginnamespace.main=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){var a;
/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var i=typeof a;if("string"===i||"number"===i)e.push(a);else if(Array.isArray(a))e.push(r.apply(null,a));else if("object"===i)for(var l in a)n.call(a,l)&&a[l]&&e.push(l)}}return e.join(" ")}void 0!==e&&e.exports?e.exports=r:void 0===(a=function(){return r}.apply(t,[]))||(e.exports=a)}()},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var l=wp.element.Component,o=wp.components,s=o.IconButton,c=o.Spinner,u=wp.i18n,p=u.__,m=u.setLocaleData,d=wp.keycodes,g=d.BACKSPACE,f=d.DELETE,b=wp.data.withSelect,h=wp.editor.RichText;m(window.gutenberg_slider.localeData,"gutenberg-slider");var y=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.onImageClick=e.onImageClick.bind(e),e.onSelectCaption=e.onSelectCaption.bind(e),e.onKeyDown=e.onKeyDown.bind(e),e.bindContainer=e.bindContainer.bind(e),e.state={captionSelected:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l),i(t,[{key:"bindContainer",value:function(e){this.container=e}},{key:"onSelectCaption",value:function(){this.state.captionSelected||this.setState({captionSelected:!0}),this.props.isSelected||this.props.onSelect()}},{key:"onImageClick",value:function(){this.props.isSelected||this.props.onSelect(),this.state.captionSelected&&this.setState({captionSelected:!1})}},{key:"onKeyDown",value:function(e){this.container===document.activeElement&&this.props.isSelected&&-1!==[g,f].indexOf(e.keyCode)&&(e.stopPropagation(),e.preventDefault(),this.props.onRemove())}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isSelected,a=t.image,r=t.url;a&&!r&&this.props.setAttributes({url:a.source_url,alt:a.alt_text}),this.state.captionSelected&&!n&&e.isSelected&&this.setState({captionSelected:!1})}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.alt,a=e.id,i=e.linkTo,l=e.link,o=e.isSelected,u=e.caption,m=e.onRemove,d=e.setAttributes,g=void 0;switch(i){case"media":g=t;break;case"attachment":g=l}var f=t?wp.element.createElement("img",{src:t,alt:n,"data-id":a,onClick:this.onImageClick}):wp.element.createElement(c,null),b=r()({"is-selected":o,"is-transient":t&&0===t.indexOf("blob:")});return wp.element.createElement("figure",{className:b,tabIndex:"-1",onKeyDown:this.onKeyDown,ref:this.bindContainer},o&&wp.element.createElement("div",{className:"block-library-gallery-item__inline-menu"},wp.element.createElement(s,{icon:"no-alt",onClick:m,className:"blocks-gallery-item__remove",label:p("Remove Image")})),g?wp.element.createElement("a",{href:g},f):f,u&&u.length>0||o?wp.element.createElement(h,{tagName:"figcaption",placeholder:p("Write captionâ€¦"),value:u,isSelected:this.state.captionSelected,onChange:function(e){return d({caption:e})},unstableOnFocus:this.onSelectCaption,inlineToolbar:!0}):null)}}]),t}(),v=b(function(e,t){var n=e("core").getMedia,a=t.id;return{image:a?n(a):null}})(y),w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function S(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var E=lodash,C=E.filter,I=E.pick,_=E.get,A=wp.element,O=A.Component,T=A.Fragment,F=wp.i18n,x=F.__,N=F.setLocaleData,j=wp.components,D=j.IconButton,P=j.DropZone,R=j.FormFileUpload,L=j.PanelBody,B=(j.RangeControl,j.TextControl),M=j.SelectControl,z=j.ToggleControl,U=j.Toolbar,K=j.withNotices,H=wp.editor,q=H.BlockControls,J=H.MediaUpload,V=H.MediaPlaceholder,W=H.InspectorControls,Z=H.mediaUpload;N(window.gutenberg_slider.localeData,"gutenberg-slider");var G=[{value:"fade",label:x("Fade","gutenberg-slider")},{value:"scroll",label:x("Scroll","gutenberg-slider")}],Q=[{value:"attachment",label:x("Attachment Page")},{value:"media",label:x("Media File")},{value:"none",label:x("None")}],X=K(function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.getAvailableSizes=e.getAvailableSizes.bind(e),e.onSelectImage=e.onSelectImage.bind(e),e.onSelectImages=e.onSelectImages.bind(e),e.setLinkTo=e.setLinkTo.bind(e),e.setSpeed=e.setSpeed.bind(e),e.setEffect=e.setEffect.bind(e),e.toggleAutoplay=e.toggleAutoplay.bind(e),e.toggleImageCrop=e.toggleImageCrop.bind(e),e.onRemoveImage=e.onRemoveImage.bind(e),e.setImageAttributes=e.setImageAttributes.bind(e),e.addFiles=e.addFiles.bind(e),e.uploadFromFiles=e.uploadFromFiles.bind(e),e.state={selectedImage:null},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,O),k(t,[{key:"getAvailableSizes",value:function(){return _(this.props.image,["media_details","sizes"],{})}},{key:"onSelectImage",value:function(e){var t=this;return function(){t.state.selectedImage!==e&&t.setState({selectedImage:e})}}},{key:"onRemoveImage",value:function(e){var t=this;return function(){var n=C(t.props.attributes.images,function(t,n){return e!==n});t.setState({selectedImage:null}),t.props.setAttributes({images:n})}}},{key:"onSelectImages",value:function(e){console.log(JSON.stringify(e)),this.props.setAttributes({images:e.map(function(e){return w({},I(e,["alt","caption","id","link","url"]),{thumb:_(e,"sizes.thumbnail.url")})})})}},{key:"setLinkTo",value:function(e){this.props.setAttributes({linkTo:e})}},{key:"setSpeed",value:function(e){this.props.setAttributes({speed:e})}},{key:"setEffect",value:function(e){this.props.setAttributes({effect:e})}},{key:"toggleAutoplay",value:function(){this.props.setAttributes({autoplay:!this.props.attributes.autoplay})}},{key:"toggleImageCrop",value:function(){this.props.setAttributes({imageCrop:!this.props.attributes.imageCrop})}},{key:"getImageCropHelp",value:function(e){return x(e?"Thumbnails are cropped to align.":"Thumbnails are not cropped.")}},{key:"setImageAttributes",value:function(e,t){var n=this.props,a=n.attributes.images,r=n.setAttributes;a[e]&&r({images:[].concat(S(a.slice(0,e)),[w({},a[e],t)],S(a.slice(e+1)))})}},{key:"uploadFromFiles",value:function(e){this.addFiles(e.target.files)}},{key:"addFiles",value:function(e){var t=this.props.attributes.images||[],n=this.props,a=n.noticeOperations,r=n.setAttributes;Z({allowedType:"image",filesList:e,onFileChange:function(e){r({images:t.concat(e)})},onError:a.createErrorNotice})}},{key:"componentDidUpdate",value:function(e){!this.props.isSelected&&e.isSelected&&this.setState({selectedImage:null,captionSelected:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.attributes,a=t.isSelected,r=t.className,i=t.noticeOperations,l=t.noticeUI,o=n.images,s=n.imageCrop,c=n.autoplay,u=n.speed,p=n.effect,m=n.linkTo,d=wp.element.createElement(P,{onFilesDrop:this.addFiles}),g=wp.element.createElement(q,null,!!o.length&&wp.element.createElement(U,null,wp.element.createElement(J,{onSelect:this.onSelectImages,type:"image",multiple:!0,gallery:!0,value:o.map(function(e){return e.id}),render:function(e){var t=e.open;return wp.element.createElement(D,{className:"components-toolbar__control",label:x("Edit Slider","gutenberg-slider"),icon:"edit",onClick:t})}})));return 0===o.length?wp.element.createElement(T,null,g,wp.element.createElement(V,{icon:"format-gallery",className:r,labels:{title:x("Slider","gutenberg-slider"),name:x("images")},onSelect:this.onSelectImages,accept:"image/*",type:"image",multiple:!0,notices:l,onError:i.createErrorNotice})):(console.log(JSON.stringify(o)),wp.element.createElement(T,null,g,wp.element.createElement(W,null,wp.element.createElement(L,{title:x("Slider Settings","gutenberg-slider")},wp.element.createElement(z,{label:x("Crop Images"),checked:!!s,onChange:this.toggleImageCrop,help:this.getImageCropHelp}),wp.element.createElement(z,{label:x("Autoplay","gutenberg-slider"),checked:!!c,onChange:this.toggleAutoplay}),wp.element.createElement(B,{label:x("Speed","gutenberg-slider"),type:"number",min:"100",max:"500",value:u,onChange:this.setSpeed}),wp.element.createElement(M,{label:x("Effect","gutenberg-slider"),value:p,onChange:this.setEffect,options:G}),wp.element.createElement(M,{label:x("Link To"),value:m,onChange:this.setLinkTo,options:Q}))),l,wp.element.createElement("ul",{className:r+" "+(s?"is-cropped":"")},d,o.map(function(t,n){return wp.element.createElement("li",{className:"blocks-gallery-item",key:t.id||t.url},wp.element.createElement(v,{url:t.url,alt:t.alt,id:t.id,isSelected:a&&e.state.selectedImage===n,onRemove:e.onRemoveImage(n),onSelect:e.onSelectImage(n),setAttributes:function(t){return e.setImageAttributes(n,t)},caption:t.caption}))}),a&&wp.element.createElement("li",{className:"blocks-gallery-item has-add-item-button"},wp.element.createElement(R,{multiple:!0,isLarge:!0,className:"block-library-gallery-add-item-button",onChange:this.uploadFromFiles,accept:"image/*",icon:"insert"},x("Upload an image"))))))}}]),t}());n.d(t,"name",function(){return pe}),n.d(t,"settings",function(){return me});var Y=lodash,$=Y.filter,ee=Y.every,te=wp.i18n,ne=te.__,ae=te.setLocaleData,re=wp.blocks,ie=re.createBlock,le=re.registerBlockType,oe=wp.editor,se=oe.RichText,ce=oe.mediaUpload,ue=wp.blob.createBlobURL;ae(window.gutenberg_slider.localeData,"gutenberg-slider");var pe="occ/slider",me={title:ne("Slider","gutenberg-slider"),description:ne("Display multiple images in an elegant slider.","gutenberg-slider"),icon:wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},wp.element.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),wp.element.createElement("path",{d:"M10 8v8l5-4-5-4zm9-5H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"})),category:"common",keywords:[ne("images"),ne("photos")],attributes:{images:{type:"array",default:[],source:"query",selector:"ul.wp-block-occ-slider .blocks-gallery-item",query:{url:{source:"attribute",selector:"img",attribute:"src"},link:{source:"attribute",selector:"img",attribute:"data-link"},alt:{source:"attribute",selector:"img",attribute:"alt",default:""},id:{source:"attribute",selector:"img",attribute:"data-id"},caption:{type:"array",source:"children",selector:"figcaption"}}},imageCrop:{type:"boolean",default:!0},autoplay:{type:"boolean",default:!0},speed:{type:"string",default:"300"},effect:{type:"string",default:"fade"},linkTo:{type:"string",default:"none"}},transforms:{from:[{type:"block",isMultiBlock:!0,blocks:["occ/slider"],transform:function(e){var t=$(e,function(e){var t=e.id,n=e.url;return t&&n});return t.length>0?ie("occ/slider",{images:t.map(function(e){return{id:e.id,url:e.url,alt:e.alt,caption:e.caption}})}):ie("occ/slider")}},{type:"shortcode",tag:"gallery",attributes:{images:{type:"array",shortcode:function(e){var t=e.named.ids;return t?t.split(",").map(function(e){return{id:parseInt(e,10)}}):[]}},linkTo:{type:"string",shortcode:function(e){var t=e.named.link,n=void 0===t?"attachment":t;return"file"===n?"media":n}}}},{type:"files",isMatch:function(e){return 1!==e.length&&ee(e,function(e){return 0===e.type.indexOf("image/")})},transform:function(e,t){var n=ie("occ/slider",{images:e.map(function(e){return{url:ue(e)}})});return ce({filesList:e,onFileChange:function(e){return t(n.clientId,{images:e})},allowedType:"image"}),n}}],to:[{type:"block",blocks:["core/image"],transform:function(e){var t=e.images;return t.length>0?t.map(function(e){var t=e.id,n=e.url,a=e.alt,r=e.caption;return ie("core/image",{id:t,url:n,alt:a,caption:r})}):ie("core/image")}}]},edit:X,save:function(e){var t=e.attributes,n=t.images,a=t.imageCrop,r=t.autoplay,i=t.speed,l=t.effect,o=t.linkTo;return wp.element.createElement("ul",{className:a?"is-cropped":"","data-autoplay":r,"data-speed":i,"data-effect":l},n.map(function(e){var t=void 0;switch(o){case"media":t=e.url;break;case"attachment":t=e.link}var n=wp.element.createElement("img",{src:e.url,alt:e.alt,"data-id":e.id,"data-link":e.link,className:e.id?"wp-image-"+e.id:null});return wp.element.createElement("li",{key:e.id||e.url,className:"blocks-gallery-item"},wp.element.createElement("figure",null,t?wp.element.createElement("a",{href:t},n):n,e.caption&&e.caption.length>0&&wp.element.createElement(se.Content,{tagName:"figcaption",value:e.caption})))}))}};le(pe,me)}]);
//# sourceMappingURL=block.build.js.map