this.pluginnamespace=this.pluginnamespace||{},this.pluginnamespace.main=function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){var a;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var r=typeof a;if("string"===r||"number"===r)e.push(a);else if(Array.isArray(a)&&a.length){var o=i.apply(null,a);o&&e.push(o)}else if("object"===r)for(var l in a)n.call(a,l)&&a[l]&&e.push(l)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(a=function(){return i}.apply(t,[]))||(e.exports=a)}()},function(e,t,n){"use strict";n.r(t),n.d(t,"name",(function(){return ke})),n.d(t,"settings",(function(){return Ee}));var a=n(0),i=n.n(a),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=wp.element,c=s.Component,u=s.Fragment,p=wp.components,m=p.Button,d=p.Spinner,f=wp.i18n,g=f.__,b=(f.setLocaleData,wp.keycodes),h=b.BACKSPACE,y=b.DELETE,v=wp.data.withSelect,w=wp.blockEditor.RichText,k=wp.blob.isBlobURL,S=function(e){function t(){o(this,t);var e=l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.onImageClick=e.onImageClick.bind(e),e.onSelectCaption=e.onSelectCaption.bind(e),e.onKeyDown=e.onKeyDown.bind(e),e.bindContainer=e.bindContainer.bind(e),e.state={captionSelected:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"bindContainer",value:function(e){this.container=e}},{key:"onSelectCaption",value:function(){this.state.captionSelected||this.setState({captionSelected:!0}),this.props.isSelected||this.props.onSelect()}},{key:"onImageClick",value:function(){this.props.isSelected||this.props.onSelect(),this.state.captionSelected&&this.setState({captionSelected:!1})}},{key:"onKeyDown",value:function(e){this.container===document.activeElement&&this.props.isSelected&&-1!==[h,y].indexOf(e.keyCode)&&(e.stopPropagation(),e.preventDefault(),this.props.onRemove())}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isSelected,a=t.image,i=t.url;a&&!i&&this.props.setAttributes({url:a.source_url,alt:a.alt_text}),this.state.captionSelected&&!n&&e.isSelected&&this.setState({captionSelected:!1})}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.alt,a=e.id,r=e.linkTo,o=e.link,l=e.isSelected,s=e.caption,c=e.onRemove,p=e.setAttributes,f=e["aria-label"],b=void 0;switch(r){case"media":b=t;break;case"attachment":b=o}var h=wp.element.createElement(u,null,wp.element.createElement("img",{src:t,alt:n,"data-id":a,onClick:this.onImageClick,tabIndex:"0",onKeyDown:this.onImageClick,"aria-label":f}),k(t)&&wp.element.createElement(d,null)),y=i()({"is-selected":l,"is-transient":k(t)});return wp.element.createElement("figure",{className:y,tabIndex:"-1",onKeyDown:this.onKeyDown,ref:this.bindContainer},l&&wp.element.createElement("div",{className:"block-library-gallery-item__inline-menu"},wp.element.createElement(m,{onClick:c,className:"blocks-gallery-item__remove",label:g("Remove Imagez"),isSmall:!0,isDestructive:!0,icon:"no-alt"})),b?wp.element.createElement("a",{href:b},h):h,!w.isEmpty(s)||l?wp.element.createElement(w,{tagName:"figcaption",placeholder:g("Write captionâ€¦"),value:s,isSelected:this.state.captionSelected,onChange:function(e){return p({caption:e})},unstableOnFocus:this.onSelectCaption,inlineToolbar:!0}):null)}}]),t}(c),E=v((function(e,t){var n=e("core").getMedia,a=t.id;return{image:a?n(a):null}}))(S),C=(n(2),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}),A=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function I(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var T=lodash,j=T.filter,D=T.pick,F=T.get,x=T.map,P=wp.element,M=P.Component,N=P.Fragment,z=wp.i18n,R=z.__,L=z.sprintf,B=(z.setLocaleData,wp.components),U=B.Button,K=B.DropZone,q=B.FormFileUpload,G=B.PanelBody,H=(B.RangeControl,B.TextControl),$=B.SelectControl,V=B.ToggleControl,W=B.Toolbar,Z=B.withNotices,J=wp.editor.mediaUpload,Q=wp.blockEditor,X=Q.BlockControls,Y=Q.InspectorControls,ee=Q.MediaPlaceholder,te=Q.MediaUpload,ne=[{value:"fade",label:R("Fade","oacs-image-slider-blocks")},{value:"scroll",label:R("Scroll","oacs-image-slider-blocks")}],ae=[{value:"attachment",label:R("Attachment Page")},{value:"media",label:R("Media File")},{value:"none",label:R("None")}],ie=["image"],re=function(e){var t=D(e,["alt","id","link","caption"]);return t.url=F(e,["sizes","large","url"])||F(e,["media_details","sizes","large","source_url"])||e.url,t},oe=Z(function(e){function t(){_(this,t);var e=O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.getAvailableSizes=e.getAvailableSizes.bind(e),e.onSelectImage=e.onSelectImage.bind(e),e.onSelectImages=e.onSelectImages.bind(e),e.setLinkTo=e.setLinkTo.bind(e),e.setSpeed=e.setSpeed.bind(e),e.setEffect=e.setEffect.bind(e),e.toggleAutoplay=e.toggleAutoplay.bind(e),e.toggleArrows=e.toggleArrows.bind(e),e.toggleDots=e.toggleDots.bind(e),e.toggleImageCrop=e.toggleImageCrop.bind(e),e.onRemoveImage=e.onRemoveImage.bind(e),e.setImageAttributes=e.setImageAttributes.bind(e),e.addFiles=e.addFiles.bind(e),e.uploadFromFiles=e.uploadFromFiles.bind(e),e.setAttributes=e.setAttributes.bind(e),e.state={selectedImage:null},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),A(t,[{key:"getAvailableSizes",value:function(){return F(this.props.image,["media_details","sizes"],{})}},{key:"setAttributes",value:function(e){if(e.ids)throw new Error('The "ids" attribute should not be changed directly. It is managed automatically when "images" attribute changes');e.images&&(e=C({},e,{ids:x(e.images,"id")})),this.props.setAttributes(e)}},{key:"onSelectImage",value:function(e){var t=this;return function(){t.state.selectedImage!==e&&t.setState({selectedImage:e})}}},{key:"onRemoveImage",value:function(e){var t=this;return function(){var n=j(t.props.attributes.images,(function(t,n){return e!==n}));t.setState({selectedImage:null}),t.setAttributes({images:n})}}},{key:"onSelectImages",value:function(e){this.props.setAttributes({images:e.map((function(e){return re(e)}))})}},{key:"setLinkTo",value:function(e){this.setAttributes({linkTo:e})}},{key:"setSpeed",value:function(e){this.setAttributes({speed:e})}},{key:"setEffect",value:function(e){this.setAttributes({effect:e})}},{key:"toggleAutoplay",value:function(){this.setAttributes({autoplay:!this.props.attributes.autoplay})}},{key:"toggleArrows",value:function(){this.setAttributes({arrows:!this.props.attributes.arrows})}},{key:"toggleDots",value:function(){this.setAttributes({dots:!this.props.attributes.dots})}},{key:"toggleImageCrop",value:function(){this.setAttributes({imageCrop:!this.props.attributes.imageCrop})}},{key:"getImageCropHelp",value:function(e){return R(e?"Thumbnails are cropped to align.":"Thumbnails are not cropped.")}},{key:"setImageAttributes",value:function(e,t){var n=this.props.attributes.images,a=this.setAttributes;n[e]&&a({images:[].concat(I(n.slice(0,e)),[C({},n[e],t)],I(n.slice(e+1)))})}},{key:"uploadFromFiles",value:function(e){this.addFiles(e.target.files)}},{key:"addFiles",value:function(e){var t=this.props.attributes.images||[],n=this.props.noticeOperations,a=this.setAttributes;J({allowedTypes:ie,filesList:e,onFileChange:function(e){var n=e.map((function(e){return re(e)}));a({images:t.concat(n)})},onError:n.createErrorNotice})}},{key:"componentDidUpdate",value:function(e){!this.props.isSelected&&e.isSelected&&this.setState({selectedImage:null,captionSelected:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.attributes,a=t.isSelected,i=t.className,r=t.noticeOperations,o=t.noticeUI,l=n.images,s=n.imageCrop,c=n.autoplay,u=n.arrows,p=n.dots,m=n.speed,d=n.effect,f=n.linkTo,g=wp.element.createElement(K,{onFilesDrop:this.addFiles}),b=wp.element.createElement(X,null,!!l.length&&wp.element.createElement(W,null,wp.element.createElement(te,{onSelect:this.onSelectImages,allowedTypes:ie,multiple:!0,gallery:!0,value:l.map((function(e){return e.id})),render:function(e){var t=e.open;return wp.element.createElement(U,{onClick:t,className:"components-toolbar__control",label:R("Edit Slider","oacs-image-slider-blocks"),isSmall:!0,icon:"edit"})}})));return 0===l.length?wp.element.createElement(N,null,b,wp.element.createElement(ee,{icon:"format-gallery",className:i,labels:{title:R("Slider","oacs-image-slider-blocks"),instructions:R("Drag images, upload new ones or select files from your library.","oacs-image-slider-blocks")},onSelect:this.onSelectImages,accept:"image/*",allowedTypes:ie,multiple:!0,notices:o,onError:r.createErrorNotice})):wp.element.createElement(N,null,b,wp.element.createElement(Y,null,wp.element.createElement(G,{title:R("Slider Settings","oacs-image-slider-blocks")},wp.element.createElement(V,{label:R("Crop Images"),checked:!!s,onChange:this.toggleImageCrop,help:this.getImageCropHelp}),wp.element.createElement(V,{label:R("Autoplay","oacs-image-slider-blocks"),checked:!!c,onChange:this.toggleAutoplay}),wp.element.createElement(V,{label:R("Show Arrows","oacs-image-slider-blocks"),checked:!!u,onChange:this.toggleArrows}),wp.element.createElement(V,{label:R("Show Dots","oacs-image-slider-blocks"),checked:!!p,onChange:this.toggleDots}),wp.element.createElement(H,{label:R("Speed","oacs-image-slider-blocks"),type:"number",min:"100",max:"500",value:m,onChange:this.setSpeed}),wp.element.createElement($,{label:R("Effect","oacs-image-slider-blocks"),value:d,onChange:this.setEffect,options:ne}),wp.element.createElement($,{label:R("Link To"),value:f,onChange:this.setLinkTo,options:ae}))),o,wp.element.createElement("ul",{className:i+" "+(s?"is-cropped":"")},g,l.map((function(t,n){var i=R(L("image %1$d of %2$d in slider",n+1,l.length));return wp.element.createElement("li",{className:"blocks-gallery-item",key:t.id||t.url},wp.element.createElement(E,{url:t.url,alt:t.alt,id:t.id,isSelected:a&&e.state.selectedImage===n,onRemove:e.onRemoveImage(n),onSelect:e.onSelectImage(n),setAttributes:function(t){return e.setImageAttributes(n,t)},caption:t.caption,"aria-label":i}))})),a&&wp.element.createElement("li",{className:"blocks-gallery-item has-add-item-button"},wp.element.createElement(q,{multiple:!0,isLarge:!0,className:"block-library-gallery-add-item-button",onChange:this.uploadFromFiles,accept:"image/*",icon:"insert"},R("Upload an image")))))}}]),t}(M)),le=(n(3),lodash),se=le.filter,ce=le.every,ue=le.map,pe=(le.some,wp.i18n),me=pe.__,de=(pe.setLocaleData,wp.blocks),fe=de.createBlock,ge=de.registerBlockType,be=wp.editor.mediaUpload,he=wp.blockEditor.RichText,ye=wp.blob.createBlobURL,ve=wp.components,we=(ve.G,ve.Path,ve.SVG),ke="oacs/slider",Se=function(e){return e?e.split(",").map((function(e){return parseInt(e,10)})):[]},Ee={title:me("Slider","oacs-image-slider-blocks"),description:me("Display multiple images in an elegant slider.","oacs-image-slider-blocks"),icon:wp.element.createElement(we,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("path",{d:"M16.5 20h-14c-0.827 0-1.5-0.673-1.5-1.5v-13c0-0.827 0.673-1.5 1.5-1.5h14c0.827 0 1.5 0.673 1.5 1.5v13c0 0.827-0.673 1.5-1.5 1.5zM2.5 5c-0.276 0-0.5 0.224-0.5 0.5v13c0 0.276 0.224 0.5 0.5 0.5h14c0.276 0 0.5-0.224 0.5-0.5v-13c0-0.276-0.224-0.5-0.5-0.5h-14z",fill:"#000000"}),wp.element.createElement("path",{d:"M16.5 3h-14c-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5h14c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5z",fill:"#000000"}),wp.element.createElement("path",{d:"M15.5 1h-12c-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5h12c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5z",fill:"#000000"}),wp.element.createElement("path",{d:"M11.5 13c-0.827 0-1.5-0.673-1.5-1.5s0.673-1.5 1.5-1.5 1.5 0.673 1.5 1.5-0.673 1.5-1.5 1.5zM11.5 11c-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5 0.5-0.224 0.5-0.5-0.224-0.5-0.5-0.5z",fill:"#000000"}),wp.element.createElement("path",{d:"M14.5 8h-10c-0.276 0-0.5 0.224-0.5 0.5v7c0 0.276 0.224 0.5 0.5 0.5h10c0.276 0 0.5-0.224 0.5-0.5v-7c0-0.276-0.224-0.5-0.5-0.5zM5 13.675l1.266-1.582c0.073-0.091 0.164-0.142 0.259-0.144s0.189 0.044 0.266 0.131l2.596 2.92h-4.387v-1.325zM14 15h-3.275l-3.187-3.585c-0.272-0.306-0.651-0.476-1.039-0.466s-0.758 0.199-1.014 0.519l-0.485 0.606v-3.075h9v6z",fill:"#000000"})),category:"common",keywords:[me("images"),me("photos"),me("slider")],attributes:{images:{type:"array",default:[],source:"query",selector:"ul.wp-block-oacs-slider .blocks-gallery-item",query:{url:{source:"attribute",selector:"img",attribute:"src"},link:{source:"attribute",selector:"img",attribute:"data-link"},alt:{source:"attribute",selector:"img",attribute:"alt",default:""},id:{source:"attribute",selector:"img",attribute:"data-id"},caption:{type:"string",source:"html",selector:"figcaption"}}},ids:{type:"array",default:[]},imageCrop:{type:"boolean",default:!0},autoplay:{type:"boolean",default:!0},arrows:{type:"boolean",default:!1},dots:{type:"boolean",default:!1},speed:{type:"string",default:"300"},effect:{type:"string",default:"fade"},linkTo:{type:"string",default:"none"}},transforms:{from:[{type:"block",isMultiBlock:!0,blocks:["core/image"],transform:function(e){var t=se(e,(function(e){var t=e.id,n=e.url;return t&&n}));return t.length>0?fe("oacs/slider",{images:t.map((function(e){return{id:e.id,url:e.url,alt:e.alt,caption:e.caption}})),ids:t.map((function(e){return e.id}))}):fe("oacs/slider")}},{type:"shortcode",tag:"gallery",attributes:{images:{type:"array",shortcode:function(e){var t=e.named.ids;return Se(t).map((function(e){return{id:e}}))}},ids:{type:"array",shortcode:function(e){var t=e.named.ids;return Se(t)}},linkTo:{type:"string",shortcode:function(e){var t=e.named.link,n=void 0===t?"attachment":t;return"file"===n?"media":n}}}},{type:"files",isMatch:function(e){return 1!==e.length&&ce(e,(function(e){return 0===e.type.indexOf("image/")}))},transform:function(e,t){var n=fe("oacs/slider",{images:e.map((function(e){return re({url:ye(e)})}))});return be({filesList:e,onFileChange:function(e){var a=e.map(re);t(n.clientId,{ids:ue(a,"id"),images:a})},allowedTypes:["image"]}),n}}],to:[{type:"block",blocks:["core/image"],transform:function(e){var t=e.images;return t.length>0?t.map((function(e){var t=e.id,n=e.url,a=e.alt,i=e.caption;return fe("core/image",{id:t,url:n,alt:a,caption:i})})):fe("core/image")}}]},edit:oe,save:function(e){var t=e.attributes,n=t.images,a=t.imageCrop,i=t.autoplay,r=t.arrows,o=t.dots,l=t.speed,s=t.effect,c=t.linkTo;return wp.element.createElement("ul",{className:a?"is-cropped":"","data-autoplay":i,"data-speed":l,"data-effect":s,"data-arrows":r,"data-dots":o},n.map((function(e){var t=void 0;switch(c){case"media":t=e.url;break;case"attachment":t=e.link}var n=wp.element.createElement("img",{src:e.url,alt:e.alt,"data-id":e.id,"data-link":e.link,className:e.id?"wp-image-"+e.id:null});return wp.element.createElement("li",{key:e.id||e.url,className:"blocks-gallery-item"},wp.element.createElement("figure",null,t?wp.element.createElement("a",{href:t},n):n,e.caption&&e.caption.length>0&&wp.element.createElement(he.Content,{tagName:"figcaption",value:e.caption})))})))}};ge(ke,Ee)},function(e,t){},function(e,t){}]);
//# sourceMappingURL=block.build.js.map